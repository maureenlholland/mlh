"use strict";var mlh={};mlh.root=document.documentElement,mlh.allH2=document.getElementsByTagName("h2"),mlh.allH3=document.getElementsByTagName("h3"),mlh.uppercase=document.getElementsByClassName("uppercase"),mlh.animation=document.getElementsByClassName("twinkling")[0],mlh.header=document.getElementsByTagName("header")[0],mlh.uoButton=document.getElementById("user-options"),mlh.featured=document.querySelectorAll(".featured")[0],mlh.checked={animation:!1,uppercase:!1,invert:!1},mlh.debounce=function(a,i,l){var o;return function(){var e=this,t=arguments,n=l&&!o;clearTimeout(o),o=setTimeout(function(){o=null,l||a.apply(e,t)},i),n&&a.apply(e,t)}},mlh.throttle=function(t,n){var a=void 0;return function(){var e=arguments;a||(t.apply(this,e),a=!0,setTimeout(function(){return a=!1},n))}},mlh.checkSize=function(){if(650<window.innerWidth)window.addEventListener("scroll",mlh.debounce(mlh.checkHeader,100),!1),mlh.header.style.position="fixed",mlh.featured.style.paddingTop="60px",mlh.header.classList.remove("mobile"),mlh.header.style.paddingTop=0;else{window.removeEventListener("scroll",mlh.debounce(mlh.checkHeader,100),!1),mlh.header.style.position="absolute",mlh.header.classList.add("mobile"),mlh.featured.style.paddingTop="80px";var e=mlh.uoButton.getBoundingClientRect().height;mlh.header.style.paddingTop=e+"px"}},mlh.debounceCheckSize=mlh.debounce(function(){if(650<window.innerWidth)window.addEventListener("scroll",mlh.debounce(mlh.checkHeader,100),!1),mlh.header.style.position="fixed",mlh.featured.style.paddingTop="60px",mlh.header.classList.remove("mobile"),mlh.header.style.paddingTop=0;else{window.removeEventListener("scroll",mlh.debounce(mlh.checkHeader,100),!1),mlh.header.style.position="absolute",mlh.header.classList.add("mobile"),mlh.featured.style.paddingTop="80px";var e=mlh.uoButton.getBoundingClientRect().height;mlh.header.style.paddingTop=e+"px"}},100),mlh.checkHeader=function(){var e=mlh.header,t=mlh.header.offsetTop;requestAnimationFrame(function(){window.pageYOffset>t?(console.log("sticky"),e.classList.add("sticky")):(console.log("not sticky"),e.classList.remove("sticky"))})},mlh.userOptionUpdate=function(e){mlh.checked[e.target.name]=!mlh.checked[e.target.name],"animation"===e.target.name?mlh.switchAnimation(e):"uppercase"===e.target.name?mlh.switchCasing(e):mlh.switchTheme(e)},mlh.switchTheme=function(e){"invert-on"===e.target.id?mlh.root.classList.add("invert"):mlh.root.classList.remove("invert")},mlh.removeUppercase=function(e){if(0!==e.length)for(var t=0;t<e.length;t++)e[t].style.textTransform="none"},mlh.addUppercase=function(e){if(0!==e.length)for(var t=0;t<e.length;t++)e[t].style.textTransform="uppercase"},mlh.switchCasing=function(e){"uppercase-removed"===e.target.id?(mlh.removeUppercase(mlh.allH2),mlh.removeUppercase(mlh.allH3),mlh.removeUppercase(mlh.uppercase)):(mlh.addUppercase(mlh.allH2),mlh.addUppercase(mlh.allH3),mlh.addUppercase(mlh.uppercase))},mlh.switchAnimation=function(e){"animation-stop"===e.target.id?mlh.animation.style.animationPlayState="paused":mlh.animation.style.animationPlayState="running"},window.addEventListener("load",mlh.checkSize,!1),window.addEventListener("resize",mlh.debounceCheckSize,!1),function(){var l=void 0,e=!!window.chrome&&!!window.chrome.webstore,o=document.getElementById("body"),s=document.getElementById("modal"),r=document.getElementById("modal-inner"),t=document.getElementById("user-options"),n=document.getElementById("message"),d=void 0,c=void 0,m=void 0,u='<form id="uo-modal" class="uo-modal" action="">\n        <fieldset>  \n          <legend>Stop Animation</legend>\n          <div class="fb-container">\n              <label for="animation-stop">\n                <input type="radio" id="animation-stop" name="animation" value="on">\n                <span class="select">Yes</span>\n              </label>\n              <label for="animation-play">\n              <input type="radio" id="animation-play" name="animation" value="off">\n              <span class="select">No</span>\n              </label>\n          </div>\n        </fieldset> \n        <fieldset>  \n          <legend>Change <span class="uppercase">Uppercase</span> to Normal Case</legend>\n          <div class="fb-container">\n              <label for="uppercase-removed">\n              <input type="radio" id="uppercase-removed" name="uppercase" value="on">\n              <span class="select">Yes</span>\n              </label>\n              <label for="uppercase-allowed">\n              <input type="radio" id="uppercase-allowed" name="uppercase" value="off">\n              <span class="select">No</span>\n              </label>\n          </div>\n        </fieldset> \n        '+(e?'<fieldset>  \n            <legend>Invert Theme Colours</legend>\n            <div class="fb-container">\n                <label for="invert-on">\n                <input type="radio" id="invert-on" name="invert" value="on">\n                <span class="select">Yes</span>\n                </label>\n                <label for="invert-off">\n                  <input type="radio" id="invert-off" name="invert" value="off">\n                  <span class="select">No</span>\n                </label>\n            </div>\n          </fieldset>':'<input style="display:none" type="radio" id="invert-off" name="invert" value="off">')+' \n        <button id="exit" class="exit">Exit User Options</button>\n        <button id="issue" class="issue">Report an issue</button>\n      </form>',p='<form id="contact" class="contact" action="https://g260z3nzb7.execute-api.us-east-1.amazonaws.com/dev/static-site-mailer" method="POST">\n        <label>\n          Name (required)\n          <input type="text" name="name" required>\n        </label>\n        <label>\n          Email (required)\n          <input type="email" name="reply_to" required>\n        </label>\n        <label>\n          Message (required):\n          <textarea name="message" rows="5" required></textarea>\n        </label>\n        <div style="display: none;">\n           <input type="text" name="bots-only" id="bots-only" />\n        </div>\n        <input type="submit"></input>\n        <button id="exit" class="exit">Close</button>\n      </form>',h=function(e){9===e.keyCode&&(e.shiftKey?document.activeElement===c&&(e.preventDefault(),m.focus()):document.activeElement===m&&(e.preventDefault(),c.focus())),27===e.keyCode&&f(e)},f=function(e){e.preventDefault(),s.style.display="none",o.classList.remove("fixed"),l.focus()},a=function t(e){switch(e.target.id){case"user-options":for(var n in r.innerHTML=u,mlh.checked)mlh.checked[n]?document.querySelectorAll("input[name="+n+'][value="on"]')[0].setAttribute("checked","true"):document.querySelectorAll("input[name="+n+'][value="off"]')[0].setAttribute("checked","true");var a=r.querySelectorAll("input");Array.from(a).forEach(function(e){e.addEventListener("change",function(e){mlh.userOptionUpdate(e)},!1)}),document.getElementById("issue").addEventListener("click",function(e){f(e),t(e)},!1);break;case"message":r.innerHTML=p,document.querySelectorAll('input[type="submit"]')[0].setAttribute("value","Send Message"),d='<div role="alert" class="response"><h2>Thanks for getting in touch!</h2><p>I will get back to you as soon as possible.</p><button id="exit" class="exit">Close</button></div>',v();break;case"issue":r.innerHTML=p,document.querySelectorAll('input[type="submit"]')[0].setAttribute("value","Report issue"),d='<div role="alert" class="response"><h2>Thanks for bring my attention to this issue!</h2><p>I will record the details on GitHub and create a fix as soon as possible.</p><button id="exit" class="exit">Close</button></div>',v()}l=document.activeElement,s.addEventListener("keydown",h),document.getElementById("exit").addEventListener("click",f);var i=s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]');(i=Array.prototype.slice.call(i),c=i[0],m=i[i.length-1],s.style.display="flex",o.classList.add("fixed"),"user-options"===e.target.id)?s.querySelectorAll("input:checked")[0].focus():c.focus()};t.addEventListener("click",function(e){a(e)},!1),n.addEventListener("click",function(e){a(e)},!1);var v=function(){var i=document.getElementById("contact");i.onsubmit=function(a){if(a.preventDefault(),!document.getElementById("bots-only").value){var t={};Array.from(i).map(function(e){return t[e.name]=e.value});var e=new XMLHttpRequest;e.open(i.method,i.action,!0),e.setRequestHeader("Accept","application/json; charset=utf-8"),e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.send(JSON.stringify(t)),e.onloadend=function(e){if(200===e.target.status){i.reset(),r.innerHTML=d;var t=document.getElementById("exit");t.addEventListener("click",f),t.focus(),(m=c=t).addEventListener("keydown",h(a),!1)}else{var n=document.createElement("div");n.innerHTML='<div><h2>Sorry, something went wrong!</h2><p>Please try again later</p><button id="exit" class="exit">Close</button></div>',i.innerHTML=n,console.error(JSON.parse(e.target.response).message),i.getElementById("exit").addEventListener("click",f)}}}}}}();